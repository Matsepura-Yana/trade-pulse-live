{"ast":null,"code":"import React,{useEffect,useState}from'react';import{useNavigate}from'react-router-dom';import'../styles/EmailVerificationPage.css';// Стили\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EmailVerificationPage=()=>{const[timeLeft,setTimeLeft]=useState(90);const[resendAvailable,setResendAvailable]=useState(false);const[currentUser,setCurrentUser]=useState(null);const navigate=useNavigate();// Загружаем текущего пользователя из localStorage\nuseEffect(()=>{const user=JSON.parse(localStorage.getItem('currentUser'));if(!user){alert('Пользователь не найден. Перенаправление на главную страницу.');navigate('/');return;}setCurrentUser(user);// Показываем alert с подтверждением\nconst confirmed=window.confirm(`Письмо с подтверждением отправлено на ${user.email}. Проверьте почту.`);// Если пользователь подтвердил, перенаправляем через 3 секунды\nif(confirmed){setTimeout(()=>{navigate('/verify-id');},2000);}},[navigate]);// Блокировка навигации назад\nuseEffect(()=>{// Блокируем переход назад\nconst handlePopState=()=>{window.history.pushState(null,null,window.location.href);};window.history.pushState(null,null,window.location.href);// Добавляем запись в историю\nwindow.addEventListener('popstate',handlePopState);// Убираем слушатель при размонтировании компонента\nreturn()=>{window.removeEventListener('popstate',handlePopState);};},[]);// Обратный отсчет для повторной отправки письма\nuseEffect(()=>{if(timeLeft===0){setResendAvailable(true);return;}const intervalId=setInterval(()=>setTimeLeft(prevTime=>prevTime-1),1000);return()=>clearInterval(intervalId);},[timeLeft]);// Функция повторной отправки письма\nconst handleResendEmail=()=>{setTimeLeft(90);setResendAvailable(false);alert('Письмо отправлено повторно. Проверьте ваш email.');};if(!currentUser)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"email-verification-page\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"title\",children:\"\\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0436\\u0434\\u0435\\u043D\\u0438\\u0435 Email\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u041D\\u0430 \\u0432\\u0430\\u0448 email \\u043E\\u0442\\u043F\\u0440\\u0430\\u0432\\u043B\\u0435\\u043D\\u043E \\u043F\\u0438\\u0441\\u044C\\u043C\\u043E. \\u041F\\u043E\\u0434\\u0442\\u0432\\u0435\\u0440\\u0434\\u0438\\u0442\\u0435 \\u0432\\u0430\\u0448\\u0443 \\u043F\\u043E\\u0447\\u0442\\u0443.\"}),/*#__PURE__*/_jsx(\"p\",{children:\"\\u0415\\u0441\\u043B\\u0438 \\u0432\\u044B \\u043D\\u0435 \\u043F\\u043E\\u043B\\u0443\\u0447\\u0438\\u043B\\u0438 \\u043F\\u0438\\u0441\\u044C\\u043C\\u043E, \\u043F\\u0440\\u043E\\u0432\\u0435\\u0440\\u044C\\u0442\\u0435 \\u043F\\u0430\\u043F\\u043A\\u0443 \\\"\\u0421\\u043F\\u0430\\u043C\\\".\"}),resendAvailable?/*#__PURE__*/_jsx(\"button\",{className:\"resend-btn\",onClick:handleResendEmail,children:\"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u043E\\u0435 \\u043F\\u0438\\u0441\\u044C\\u043C\\u043E\"}):/*#__PURE__*/_jsxs(\"p\",{children:[\"\\u041E\\u0441\\u0442\\u0430\\u043B\\u043E\\u0441\\u044C \\u0432\\u0440\\u0435\\u043C\\u0435\\u043D\\u0438: \",timeLeft,\" \\u0441\\u0435\\u043A\\u0443\\u043D\\u0434\"]})]})});};export default EmailVerificationPage;","map":{"version":3,"names":["React","useEffect","useState","useNavigate","jsx","_jsx","jsxs","_jsxs","EmailVerificationPage","timeLeft","setTimeLeft","resendAvailable","setResendAvailable","currentUser","setCurrentUser","navigate","user","JSON","parse","localStorage","getItem","alert","confirmed","window","confirm","email","setTimeout","handlePopState","history","pushState","location","href","addEventListener","removeEventListener","intervalId","setInterval","prevTime","clearInterval","handleResendEmail","className","children","onClick"],"sources":["C:/Users/Yana/trade pulse live/src/pages/EmailVerificationPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport '../styles/EmailVerificationPage.css' // Стили\r\n\r\nconst EmailVerificationPage = () => {\r\n\tconst [timeLeft, setTimeLeft] = useState(90)\r\n\tconst [resendAvailable, setResendAvailable] = useState(false)\r\n\tconst [currentUser, setCurrentUser] = useState(null)\r\n\tconst navigate = useNavigate()\r\n\r\n\t// Загружаем текущего пользователя из localStorage\r\n\tuseEffect(() => {\r\n\t\tconst user = JSON.parse(localStorage.getItem('currentUser'))\r\n\t\tif (!user) {\r\n\t\t\talert('Пользователь не найден. Перенаправление на главную страницу.')\r\n\t\t\tnavigate('/')\r\n\t\t\treturn\r\n\t\t}\r\n\t\tsetCurrentUser(user)\r\n\r\n\t\t// Показываем alert с подтверждением\r\n\t\tconst confirmed = window.confirm(\r\n\t\t\t`Письмо с подтверждением отправлено на ${user.email}. Проверьте почту.`\r\n\t\t)\r\n\r\n\t\t// Если пользователь подтвердил, перенаправляем через 3 секунды\r\n\t\tif (confirmed) {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tnavigate('/verify-id')\r\n\t\t\t}, 2000)\r\n\t\t}\r\n\t}, [navigate])\r\n\r\n\t// Блокировка навигации назад\r\n\tuseEffect(() => {\r\n\t\t// Блокируем переход назад\r\n\t\tconst handlePopState = () => {\r\n\t\t\twindow.history.pushState(null, null, window.location.href)\r\n\t\t}\r\n\r\n\t\twindow.history.pushState(null, null, window.location.href) // Добавляем запись в историю\r\n\t\twindow.addEventListener('popstate', handlePopState)\r\n\r\n\t\t// Убираем слушатель при размонтировании компонента\r\n\t\treturn () => {\r\n\t\t\twindow.removeEventListener('popstate', handlePopState)\r\n\t\t}\r\n\t}, [])\r\n\r\n\t// Обратный отсчет для повторной отправки письма\r\n\tuseEffect(() => {\r\n\t\tif (timeLeft === 0) {\r\n\t\t\tsetResendAvailable(true)\r\n\t\t\treturn\r\n\t\t}\r\n\r\n\t\tconst intervalId = setInterval(\r\n\t\t\t() => setTimeLeft((prevTime) => prevTime - 1),\r\n\t\t\t1000\r\n\t\t)\r\n\t\treturn () => clearInterval(intervalId)\r\n\t}, [timeLeft])\r\n\r\n\t// Функция повторной отправки письма\r\n\tconst handleResendEmail = () => {\r\n\t\tsetTimeLeft(90)\r\n\t\tsetResendAvailable(false)\r\n\t\talert('Письмо отправлено повторно. Проверьте ваш email.')\r\n\t}\r\n\r\n\tif (!currentUser) return null\r\n\r\n\treturn (\r\n\t\t<div className='email-verification-page'>\r\n\t\t\t{/* Основной контент страницы */}\r\n\t\t\t<div className='content'>\r\n\t\t\t\t<h1 className='title'>Подтверждение Email</h1>\r\n\t\t\t\t<p>На ваш email отправлено письмо. Подтвердите вашу почту.</p>\r\n\t\t\t\t<p>Если вы не получили письмо, проверьте папку \"Спам\".</p>\r\n\t\t\t\t{resendAvailable ? (\r\n\t\t\t\t\t<button className='resend-btn' onClick={handleResendEmail}>\r\n\t\t\t\t\t\tОтправить новое письмо\r\n\t\t\t\t\t</button>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t<p>Осталось времени: {timeLeft} секунд</p>\r\n\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default EmailVerificationPage\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}